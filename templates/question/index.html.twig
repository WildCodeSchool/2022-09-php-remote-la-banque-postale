{% extends 'base.html.twig' %}

{% block title %}Question index
{% endblock %}

{% block body %}
	<a class="siteButton" href="{{ path('app_admin') }}" title="retour">Retour au panneau général</a>

	<h1>Administration des questions et des réponses</h1>
	<div class="containerButtonCentered">
		<a class="validationButton" href="{{ path('app_question_new') }}" title="créer">Créer une nouvelle question</a>
	</div>

	{% for question in questions %}
		<h5 class="mt-5">Question n°
			{{ question.id }}</h5>
		<table class="table">
			<thead>
				<tr>
					<th>Tuto n°</th>
					<th>Content</th>
					<th></th>
				</tr>
			</thead>
			<tbody>
				<tr>
					<td>{{ question.tutoriel.id }}</td>
					<td>{{ question.content }}</td>
					<td class="text-end">
						<div class="d-inline-flex">
							<div class="d-flex align-self-center p-2">
								<a class="showButton" href="{{ path('app_question_show', {'id': question.id}) }}" title="voir">Voir</a>
							</div>
							<div class="d-flex align-self-center p-2">
								<a class="editButton" href="{{ path('app_question_edit', {'id': question.id}) }}" title="éditer">Éditer</a>
							</div>
							<div class="d-flex align-self-center p-2">
								{{ include('question/_delete_form.html.twig') }}
							</div>
						</div>
					</td>
				</tr>
			</tbody>
		</table>
		<table class="table">
			<h6>Réponses associées</h6>
			<thead>
				<tr>
					<th>Id</th>
					<th>Question n°</th>
					<th>Content</th>
					<th></th>
				</tr>
			</thead>

			{% for answer in questions.0.answers %}
				{% if answer.question.id == question.id %}
					<tbody>
						<tr>
							<td>{{ answer.id }}</td>
							<td>{{ answer.question.id }}</td>
							<td>{{ answer.content }}</td>
							<td class="text-end">
								<div class="d-inline-flex">
									<div class="d-flex align-self-center p-2">
										<a class="showButton" href="{{ path('app_question_show', {'id': question.id}) }}" title="voir">Voir</a>
									</div>
									<div class="d-flex align-self-center p-2">
										<a class="editButton" href="{{ path('app_question_edit', {'id': question.id}) }}" title="éditer">Éditer</a>
									</div>
									<div class="d-flex align-self-center p-2">
										{{ include('question/_delete_form.html.twig') }}
									</div>
								</div>
							</td>
						</tr>
					</tbody>
				{% endif %}
			{% endfor %}
		</table>
	{% else %}
		<table class="table">
			<thead>
				<tr>
					<td colspan="3">no records found</td>
				</tr>
			</thead>
		</table>
	{% endfor %}
{% endblock %}
